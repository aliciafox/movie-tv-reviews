import requests

def fetch_items(api_url, total_items=200, items_per_page=50):
    # Initialize list to hold all items
    all_items = []
    
    # Calculate how many pages are needed to reach total_items
    total_pages = total_items // items_per_page
    if total_items % items_per_page != 0:
        total_pages += 1  # Add an extra page if not perfectly divisible

    # Loop through each page to fetch data
    for page in range(1, total_pages + 1):
        params = {'page': page, 'limit': items_per_page}
        
        # Make API request
        response = requests.get(api_url, params=params)
        
        # Check if response is successful
        if response.status_code == 200:
            data = response.json()
            # Assume data['items'] contains the list of items
            all_items.extend(data['items'])  
            print(f"Fetched {len(data['items'])} items from page {page}")
        else:
            print(f"Error fetching data from page {page}, Status Code: {response.status_code}")
            break  # Stop if an error occurs

        # If we already have enough items, stop the loop
        if len(all_items) >= total_items:
            break

    print(f"Collected {len(all_items)} items")
    return all_items

# Usage example
api_url = "https://api.example.com/items"  # Replace with actual API endpoint
items = fetch_items(api_url)
